"use strict";function isNumber(a){return!isNaN(parseFloat(a))&&isFinite(a)}angular.module("groot",["angular-loading-bar","ngAnimate","ngAria","ngCookies","ngMaterial","ngMessages","ngResource","ngRoute","ngSanitize","valdr","pascalprecht.translate","ngTable","angular-growl","ngResource","ui.router","LocalStorageModule","groot.controllers","groot.services","groot.directives"]).config(["$urlRouterProvider","$httpProvider","growlProvider","valdrMessageProvider","valdrProvider","$translateProvider","$stateProvider","cfpLoadingBarProvider",function(a,b,c,d,e,f,g,h){a.otherwise("/splash"),c.globalTimeToLive(5e3),h.includeSpinner=!1,d.setTemplateUrl("app/shared/templates/valdr/valdrMesssageTemplate.html"),b.interceptors.push("apiResponseInterceptor"),e.addValidator("serverValidator"),f.translations("en",{"SERVER.USER_EMAIL_DUPLICATE":"Email address already exists","SERVER.SECOND_ERROR":"Second error from server (testing)","VALIDATIONS.SIZE":"{{fieldName}} must be between {{min}} and {{max}} characters.","VALIDATIONS.REQUIRED":"{{fieldName}} is required","VALIDATIONS.INVALID_EMAIL":"{{fieldName}} is not a valid email","VALIDATIONS.SERVER_MESSAGE":"Server returned an error on this field","User.name":"Name","User.email":"Email"}),f.translations("de",{"SERVER.USER_EMAIL_DUPLICATE":"Some german message","SERVER.SECOND_ERROR":"Dies ist ein Paragraph","VALIDATIONS.SIZE":"{{fieldName}} must be between {{min}} and {{max}} characters.","VALIDATIONS.REQUIRED":"{{fieldName}} is required","VALIDATIONS.INVALID_EMAIL":"{{fieldName}} is not a valid email","VALIDATIONS.SERVER_MESSAGE":"Server returned an error on this field","User.name":"Name","User.email":"Email"}),f.preferredLanguage("en")}]).run(["$rootScope","$state","$timeout","localStorageService",function(a,b,c,d){a.$on("$stateChangeSuccess",function(c,d){if(b.current=d.name,b.current){var e=b.current[0].toUpperCase()+b.current.slice(1);a.title=" | "+e||""}a.currentState=b.current}),a.$on("$stateChangeError",function(a,c,e,f){var g=d.get("id");g||b.go("login"),f.authenticated===!1&&b.go("login")})}]),angular.module("groot.controllers",[]),angular.module("groot.services",[]),angular.module("groot.directives",[]),angular.module("groot.filters",[]),angular.module("groot").constant("Settings",{api:{baseUrl:"/api/v1/"},translate:{errorPrefix:"SERVER."}}),angular.module("groot.filters").filter("dateFilter",["moment",function(a){return function(b){console.log(b,"input");var c;return c=b?a(b).format("DD MMM YYYY"):"-"}}]),angular.module("groot.controllers").controller("splashController",["$scope","$state","$stateParams","$timeout","localStorageService",function(a,b,c,d,e){function f(){g()}function g(){d(function(){b.go("login")},2500)}f()}]),angular.module("groot.controllers").config(["$stateProvider",function(a){a.state("splash",{url:"/splash",templateUrl:"app/components/splash/views/splash.html",controller:"splashController"})}]),angular.module("groot.controllers").controller("loginController",["$scope","$state","$stateParams","growl","localStorageService",function(a,b,c,d,e){function f(){a.user={}}a.login=function(){"admin@gmail.com"===a.user.email&&"admin"===a.user.password?(b.go("projects"),e.set("name","Admin"),e.set("isLoggedIn",!0)):d.error("Not so groot of us. Try Again!!!")},f()}]),angular.module("groot.controllers").config(["$stateProvider",function(a){a.state("login",{url:"/login",templateUrl:"app/components/login/views/login.html",controller:"loginController"})}]),angular.module("groot.controllers").controller("projectsController",["$scope","$state","$stateParams","growl","projectsService","dateFilter",function(a,b,c,d,e,f){function g(){a.projects=[],h()}function h(){e.getAllProjects().then(function(b){a.projects=b.data,console.log(a.projects)})["catch"](function(a){d.error(a)})}g()}]),angular.module("groot.controllers").config(["$stateProvider",function(a){a.state("projects",{url:"/projects",templateUrl:"app/components/projects/views/landing-projects.html",controller:"projectsController"})}]),angular.module("groot.services").factory("projectsService",["$q","$http","Settings",function(a,b,c){function d(){return b.get("app/shared/data/projects.json")}return{getAllProjects:d}}]),angular.module("groot.controllers").controller("adminController",["$scope","$state","$stateParams","growl","localStorageService","adminService",function(a,b,c,d,e,f){function g(){a.project={},a.popup1={opened:!1}}function h(b){var c=b.date,d=b.mode;if("day"===d)for(var e=new Date(c).setHours(0,0,0,0),f=0;f<a.events.length;f++){var g=new Date(a.events[f].date).setHours(0,0,0,0);if(e===g)return a.events[f].status}return a.toggleMin=function(){a.inlineOptions.minDate=a.inlineOptions.minDate?null:new Date,a.dateOptions.minDate=a.inlineOptions.minDate},""}a.postProject=function(){f.postProjectData(a.project).then(function(a){})["catch"](function(a){d.error(a)})},a.login=function(){"admin@gmail.com"===a.user.email&&"admin"===a.user.password?(b.go("projects"),e.set("name","Admin")):d.error("Not so groot of us. Try Again!!!")},a.open1=function(){a.popup1.opened=!0},a.setDate=function(b,c,d){a.dt=new Date(b,c,d)},a.formats=["dd-MMMM-yyyy","yyyy/MM/dd","dd.MM.yyyy","shortDate"],a.format=a.formats[0],a.altInputFormats=["M!/d!/yyyy"],a.popup1={opened:!1};var i=new Date;i.setDate(i.getDate()+1);var j=new Date;j.setDate(i.getDate()+1),a.events=[{date:i,status:"full"},{date:j,status:"partially"}],a.inlineOptions={customClass:h,minDate:new Date,showWeeks:!0},g()}]),angular.module("groot.controllers").config(["$stateProvider",function(a){a.state("admin",{url:"/admin",templateUrl:"app/components/admin/views/admin.html",controller:"adminController"})}]),angular.module("groot.services").factory("adminService",["$q","$http","Settings",function(a,b,c){function d(a){return b({method:"POST",url:"/project/",data:a})}return{postProjectData:d}}]),angular.module("groot.controllers").controller("projectDetailController",["$scope","$state","$stateParams","$window","localStorageService",function(a,b,c,d,e){function f(){d.scrollTo(0,0),a.projectStatus={},a.accountStatus={}}f()}]),angular.module("groot.controllers").config(["$stateProvider",function(a){a.state("projectDetail",{url:"/projectDetail/:id",templateUrl:"app/components/projectDetail/views/projectDetail.html",controller:"projectDetailController"})}]),angular.module("groot.controllers").controller("historyController",["$scope","$state","$stateParams","growl","historyService",function(a,b,c,d,e){function f(){var b=c.id;a.history=[],g(b)}function g(b){e.getAllHistory(b).then(function(b){a.history=b.data.data})["catch"](function(a){d.error(a)})}f()}]),angular.module("groot.controllers").config(["$stateProvider",function(a){a.state("history",{url:"/history/:id",templateUrl:"app/components/history/views/history.html",controller:"historyController"})}]),angular.module("groot.services").factory("historyService",["$q","$http","Settings",function(a,b,c){function d(a){return b({method:"GET",url:"/history/"+a})}return{getAllHistory:d}}]),angular.module("groot.controllers").controller("navbarController",["$scope","$state","$stateParams","localStorageService",function(a,b,c,d){function e(){a.$state=b;var c=d.get("name");a.isLoggedIn=d.get("isLoggedIn"),a.imageUrl="",a.isLoggedIn&&f(c)}function f(b){var c=b.split(" ")[0],d=b.split(" ")[1],e=document.createElement("canvas");e.style.display="none",e.width="80",e.height="80",document.body.appendChild(e);var f=e.getContext("2d");if(f.fillStyle="#67c7c8",f.globalAlpha=1,f.fillRect(0,0,e.width,e.height),f.font="bold 28px Avenir",f.fillStyle="#ffffff",void 0===d){var g=b[0].toUpperCase(),h=b[1].toUpperCase();f.fillText(g,22,48),f.fillText(h,40,48)}else{var g=c[0];f.fillText(g.toUpperCase(),22,48);var h=d[0];f.fillText(h.toUpperCase(),40,48)}a.imageUrl=e.toDataURL()}a.logout=function(){localStorage.clear(),b.go("splash")},e()}]),angular.module("groot.controllers").controller("sidebarController",["$scope","$state","$stateParams","localStorageService",function(a,b,c,d){function e(){a.employee={imgUrl:d.get("image"),name:d.get("name")}}a.signOut=function(){var a=gapi.auth2.getAuthInstance();a.signOut().then(function(){console.log("User signed out.")}),localStorage.clear(),b.go("login")},e()}]),angular.module("groot.services").factory("apiResponseInterceptor",["$q","growl","serverValidator",function(a,b,c){return{responseError:function(d){if(422===d.status){var e=d.data;"fail"===e.status&&c.validator.triggerValidator(e.data)}else b.error("Failed with "+d.status+" status");return a.reject(d)}}}]),angular.module("groot.services").factory("serverValidator",["$rootScope","valdrEvents","$translate","Settings",function(a,b,c,d){var e=function(){this.violations=[],this.triggerValidator=function(c){console.log("data :: ",c);var e,f,g=[];for(var h in c){for(g=[],this.violations[h]="",f=c[h].length,e=0;f>e;e+=1)g.push(d.translate.errorPrefix+c[h][e].errorCode);this.violations[h]=g.join(" | ")}a.$broadcast(b.revalidate)},this.resetService=function(a){delete this.violations[a]},this.isServerError=function(a){return angular.isDefined(this.violations[a])?!0:!1},this.getErrorMessage=function(a){return this.violations[a]}},f=new e;return{name:"serverValidator",validate:function(a,b){var c=b.field;return f.isServerError(c)===!0?(b.message=f.getErrorMessage(c),f.resetService(c),!1):!0},validator:f}}]);var app=angular.module("DemoMock",["ngTable","ngMockE2E"]).run(["$httpBackend","$filter","$log","ngTableParams",function(a,b,c,d){a.whenGET(/users.*/).respond(function(a,e,f,g){var h=e.split("?")[1],i={};c.log("Ajax request: ",e);for(var j=h.split("&"),k=0;k<j.length;k++){var l=j[k].split("=");i[decodeURIComponent(l[0])]=decodeURIComponent(l[1])}for(var m in i)if(m.indexOf("[")>=0){var n=m.split(/\[(.*)\]/),o=i[m],p="";angular.forEach(n.reverse(),function(a){if(""!=a){var b=o;o={},o[p=a]=isNumber(b)?parseFloat(b):b}}),i[p]=angular.extend(i[p]||{},o[p])}else i[m]=isNumber(i[m])?parseFloat(i[m]):i[m];f=[{id:1,name:"Moroni",email:"moroni@gmail.com"},{id:2,name:"Tiancum",email:"Tiancum@gmail.com"},{id:3,name:"Jacob",email:"Jacob@gmail.com"},{id:4,name:"Nephi",email:"Nephi@gmail.com"},{id:5,name:"Enos",email:"Enos@gmail.com"},{id:6,name:"Tiancum",email:"Tiancum@gmail.com"},{id:7,name:"Jacob",email:"Jacob@gmail.com"},{id:8,name:"Nephi",email:"Nephi@gmail.com"},{id:9,name:"Enos",email:"Enos@gmail.com"},{id:10,name:"Tiancum",email:"Tiancum@gmail.com"},{id:11,name:"Jacob",email:"Jacob@gmail.com"},{id:12,name:"Nephi",email:"Nephi@gmail.com"},{id:13,name:"Enos",email:"Enos@gmail.com"},{id:14,name:"Tiancum",email:"Tiancum@gmail.com"},{id:15,name:"Jacob",email:"Jacob@gmail.com"},{id:16,name:"Nephi",email:"Nephi@gmail.com"},{id:17,name:"Enos",email:"Enos@gmail.com"}];var n=new d(i);f=n.filter()?b("filter")(f,n.filter()):f,f=n.sorting()?b("orderBy")(f,n.orderBy()):f;var q=f.length;return f=f.slice((n.page()-1)*n.count(),n.page()*n.count()),[200,{result:f,total:q}]}),a.whenGET(/.*/).passThrough()}]);